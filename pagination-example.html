<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ejemplo de Paginación - Sistema de Préstamos</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script src="js/pagination.js"></script>
</head>
<body>
    <div class="container mt-4">
        <h1>Ejemplo de Sistema de Paginación</h1>
        <p class="text-muted">Demostración del sistema de paginación unificado</p>

        <!-- Ejemplo 1: Lista de Clientes -->
        <div class="card mb-4">
            <div class="card-header">
                <h5><i class="fas fa-users me-2"></i>Lista de Clientes</h5>
            </div>
            <div class="card-body">
                <div id="clientsSearchBar"></div>
                <div class="table-responsive">
                    <table class="table table-striped" id="clientsTable">
                        <thead class="table-dark">
                            <tr>
                                <th>ID</th>
                                <th>Nombre</th>
                                <th>Email</th>
                                <th>Teléfono</th>
                                <th>Estado</th>
                            </tr>
                        </thead>
                        <tbody id="clientsTableBody">
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Ejemplo 2: Lista de Productos -->
        <div class="card mb-4">
            <div class="card-header">
                <h5><i class="fas fa-box me-2"></i>Lista de Productos</h5>
            </div>
            <div class="card-body">
                <div id="productsSearchBar"></div>
                <div class="table-responsive">
                    <table class="table table-striped" id="productsTable">
                        <thead class="table-dark">
                            <tr>
                                <th>Código</th>
                                <th>Nombre</th>
                                <th>Precio</th>
                                <th>Stock</th>
                                <th>Categoría</th>
                            </tr>
                        </thead>
                        <tbody id="productsTableBody">
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-6">
                <button class="btn btn-primary" onclick="loadClients()">Cargar Clientes</button>
                <button class="btn btn-secondary" onclick="loadProducts()">Cargar Productos</button>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        let clientsPagination, productsPagination;

        // Datos de ejemplo
        const sampleClients = [
            { id: 1, nombre: 'Juan Pérez', email: 'juan@email.com', telefono: '123-456-7890', estado: 'activo' },
            { id: 2, nombre: 'María García', email: 'maria@email.com', telefono: '098-765-4321', estado: 'inactivo' },
            { id: 3, nombre: 'Carlos López', email: 'carlos@email.com', telefono: '555-123-4567', estado: 'activo' },
            { id: 4, nombre: 'Ana Martínez', email: 'ana@email.com', telefono: '777-888-9999', estado: 'activo' },
            { id: 5, nombre: 'Pedro Rodríguez', email: 'pedro@email.com', telefono: '111-222-3333', estado: 'inactivo' },
            { id: 6, nombre: 'Laura Sánchez', email: 'laura@email.com', telefono: '444-555-6666', estado: 'activo' },
            { id: 7, nombre: 'Miguel Torres', email: 'miguel@email.com', telefono: '999-888-7777', estado: 'activo' },
            { id: 8, nombre: 'Carmen Ruiz', email: 'carmen@email.com', telefono: '666-555-4444', estado: 'inactivo' },
            { id: 9, nombre: 'Roberto Díaz', email: 'roberto@email.com', telefono: '333-222-1111', estado: 'activo' },
            { id: 10, nombre: 'Isabel Moreno', email: 'isabel@email.com', telefono: '888-999-0000', estado: 'activo' },
            { id: 11, nombre: 'Francisco Jiménez', email: 'francisco@email.com', telefono: '222-333-4444', estado: 'inactivo' },
            { id: 12, nombre: 'Lucía Herrera', email: 'lucia@email.com', telefono: '555-666-7777', estado: 'activo' },
            { id: 13, nombre: 'Antonio Vargas', email: 'antonio@email.com', telefono: '777-666-5555', estado: 'activo' },
            { id: 14, nombre: 'Rosa Castillo', email: 'rosa@email.com', telefono: '444-333-2222', estado: 'inactivo' },
            { id: 15, nombre: 'Javier Ortega', email: 'javier@email.com', telefono: '111-000-9999', estado: 'activo' }
        ];

        const sampleProducts = [
            { codigo: 'P001', nombre: 'Laptop HP', precio: 899.99, stock: 15, categoria: 'Electrónicos' },
            { codigo: 'P002', nombre: 'Mouse Inalámbrico', precio: 25.50, stock: 50, categoria: 'Accesorios' },
            { codigo: 'P003', nombre: 'Teclado Mecánico', precio: 75.00, stock: 30, categoria: 'Accesorios' },
            { codigo: 'P004', nombre: 'Monitor 24"', precio: 199.99, stock: 20, categoria: 'Electrónicos' },
            { codigo: 'P005', nombre: 'Impresora Láser', precio: 150.00, stock: 8, categoria: 'Oficina' },
            { codigo: 'P006', nombre: 'Webcam HD', precio: 45.99, stock: 25, categoria: 'Accesorios' },
            { codigo: 'P007', nombre: 'Auriculares Bluetooth', precio: 89.99, stock: 40, categoria: 'Audio' },
            { codigo: 'P008', nombre: 'Tablet Android', precio: 299.99, stock: 12, categoria: 'Electrónicos' },
            { codigo: 'P009', nombre: 'Cargador USB-C', precio: 19.99, stock: 100, categoria: 'Accesorios' },
            { codigo: 'P010', nombre: 'Disco Duro Externo', precio: 79.99, stock: 35, categoria: 'Almacenamiento' }
        ];

        function loadClients() {
            // Inicializar paginación para clientes
            if (!clientsPagination) {
                clientsPagination = new PaginationManager('clientsTable', {
                    pageSize: 5,
                    renderCallback: renderClientsTable,
                    searchCallback: searchClients,
                    labels: { records: 'clientes' }
                });
                
                // Agregar barra de búsqueda
                document.getElementById('clientsSearchBar').innerHTML = 
                    clientsPagination.createSearchBar('Buscar clientes...');
            }
            
            clientsPagination.setData(sampleClients);
        }

        function loadProducts() {
            // Inicializar paginación para productos
            if (!productsPagination) {
                productsPagination = new PaginationManager('productsTable', {
                    pageSize: 4,
                    renderCallback: renderProductsTable,
                    searchCallback: searchProducts,
                    labels: { records: 'productos' }
                });
                
                // Agregar barra de búsqueda
                document.getElementById('productsSearchBar').innerHTML = 
                    productsPagination.createSearchBar('Buscar productos...');
            }
            
            productsPagination.setData(sampleProducts);
        }

        function renderClientsTable(clients) {
            const tbody = document.getElementById('clientsTableBody');
            
            if (clients.length === 0) {
                PaginationUtils.renderEmptyTable(tbody, 5, 'fas fa-users', 'No hay clientes para mostrar');
                return;
            }
            
            tbody.innerHTML = '';
            clients.forEach(client => {
                const row = `
                    <tr>
                        <td>${client.id}</td>
                        <td>${client.nombre}</td>
                        <td>${client.email}</td>
                        <td>${client.telefono}</td>
                        <td>${PaginationUtils.createStatusBadge(client.estado)}</td>
                    </tr>
                `;
                tbody.innerHTML += row;
            });
        }

        function searchClients(clients, searchTerm) {
            return clients.filter(client => 
                client.nombre.toLowerCase().includes(searchTerm.toLowerCase()) ||
                client.email.toLowerCase().includes(searchTerm.toLowerCase()) ||
                client.telefono.includes(searchTerm)
            );
        }

        function renderProductsTable(products) {
            const tbody = document.getElementById('productsTableBody');
            
            if (products.length === 0) {
                PaginationUtils.renderEmptyTable(tbody, 5, 'fas fa-box', 'No hay productos para mostrar');
                return;
            }
            
            tbody.innerHTML = '';
            products.forEach(product => {
                const row = `
                    <tr>
                        <td>${product.codigo}</td>
                        <td>${product.nombre}</td>
                        <td>${PaginationUtils.formatCurrency(product.precio)}</td>
                        <td>${product.stock}</td>
                        <td><span class="badge bg-secondary">${product.categoria}</span></td>
                    </tr>
                `;
                tbody.innerHTML += row;
            });
        }

        function searchProducts(products, searchTerm) {
            return products.filter(product => 
                product.nombre.toLowerCase().includes(searchTerm.toLowerCase()) ||
                product.codigo.toLowerCase().includes(searchTerm.toLowerCase()) ||
                product.categoria.toLowerCase().includes(searchTerm.toLowerCase())
            );
        }

        // Cargar datos iniciales
        document.addEventListener('DOMContentLoaded', function() {
            loadClients();
            loadProducts();
        });
    </script>
</body>
</html>